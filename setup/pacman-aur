#!/bin/bash

IFS=$'\n'

add ()
{
	for pkg in "$@"; do
		list+=("$pkg")
	done
}

list=()

[ $(whoami) = root ] && exit 1

##1 yaourt
if true; then
	echo -n "Install yaourt? [Y/n] "
	read reply
	if [[ "$reply" == [Nn]* ]]; then
		exit 0
	fi

	TMP=~/tmp
	YAOURT=yaourt.tar.gz

	if [ ! -d $TMP ]; then
		mkdir -p $TMP
	fi
	cd $TMP && \
		# wget tarball
		wget http://aur.archlinux.org/packages/yaourt/$YAOURT && \
		tar xzvf $YAOURT && rm $YAOURT && cd yaourt && \
		vi PKGBUILD yaourt.install

	echo -n "Make package and install? [y/N] "
	read reply
	if [[ "$reply" == [Yy]* ]]; then
		# make and install
		makepkg PKGBUILD && sudo pacman -U yaourt-*.pkg.tar.?z
	fi

	rm -rf $TMP/yaourt
	[ -z "$(ls -A $TMP)" ] && rmdir $TMP
fi

add aurvote

##1 UI
add xautomation

##1 fonts
# add ttf-ms-fonts
# add ttf-ms-extrafonts
# add ttf-tahoma
# add ttf-vista-fonts
add ttf-google-webfonts

##1 command-line
add ack # grep drop-in
add ascii
add sl
add trash-cli

##1 languages
add mit-scheme

##1 libraries/tools
# add thunar-vcs-plugin

##1 filesystem
add foremost # file recovery tool

##1 files/documents
add detox # clean up filenames

##2 pdf/tex

##1 graphics
add gimp-resynth
add libsvg
add svg2png

##1 multimedia
##2 audio
add fluidr3 # MIDI soundfont
add flac2mp3

##2 video
# add winff

##2 optical
# add cdrtools # alternative to cdrkit

##1 misc
# add brainworkshop
add mbrola # text-to-speech

##1 INSTALL
if which clyde &>/dev/null; then
	AUR=(sudo clyde)
elif which yaourt &>/dev/null; then
	AUR=(yaourt)
else
	echo >&2 "No AUR frontend found."
	exit 1
fi

for pkg in "${list[@]}"; do
	echo -n "Download, make, and install $pkg? [Y/n] "
	read reply
	if [[ "$reply" != [Nn]* ]]; then
		"${AUR[@]}" -S --noconfirm $pkg
	fi
done

##1 vim:set ts=4 sw=4 noet fdm=marker fmr=##,##:
