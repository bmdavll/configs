" Vimperator 2.1 {{{1

" Usage notes
" C-v C-z		pass next keystroke / pass all keystrokes
" y   Y			yank current location / yank selected text
" p   P  gP		open from clipboard / open in new tab / in background
" C-a C-x		increment / decrement URL
" gh  gH		go home / in new tab
" gu  gU		go to parent page / to main page
" r   R			reload / bypass cache
" :sav			save as
" ZZ  ZQ		quit, saving session / without saving
" g C-g			:pageinfo
" gf  gF		toggle source view / view source in external editor
" 0   $			scroll left / right
" gi			focus input field
" [[  ]]		follow previous / next links
" zi  zo		zoom in / out by level
" zm  zr		zoom more / zoom reduce
" zz			set zoom to [100]%
" use zI zO zM zR zZ for full-page zoom instead of text-only zoom
" C-^			select previously selected tab
" g0  g$		select first / last tab
" ;{MODE}		hint mode:		;	focus element
"				o	open		t	in new tab		b	in background	F	open multiple
"				s	save		y	yank link		Y	yank text description
" A				toggle star (goes into unsorted bookmarks)
" {a-zA-Z0-9}	quickmarks for URLs (persistent across sessions)
" M   go  gn	quickmark current page / open quickmark / open in new tab
" :ha			print
" :dia			open firefox dialogs
" :sa!			clear private items

" mappings {{{1
let mapleader = ','

" no-ops {{{2
map				F			<Nop>
map				L			<Nop>

map				<C-y>		<Nop>
map				<C-j>		<Nop>
map				<C-k>		<Nop>
map				<C-p>		<Nop>
map				<C-n>		<Nop>

imap			<C-p>		<Nop>
imap			<C-n>		<Nop>
imap			<C-f>		<Nop>

cmap			<C-f>		<Nop>

" basics {{{2
noremap			<C-Space>	<Esc>
inoremap		<C-Space>	<Esc>
cnoremap		<C-Space>	<Esc>

inoremap		<C-m>		<CR>
inoremap		<C-j>		<CR>
cnoremap		<C-j>		<CR>

" use as another <C-v>
noremap			<C-b>		<C-v>
inoremap		<C-b>		<C-v>
cnoremap		<C-b>		<C-v>

" scrolling {{{2
nnoremap		h			3h
nnoremap		l			3l
nnoremap		j			2j
nnoremap		k			2k

" scroll up/down quarter-page
nnoremap		f			10k
nnoremap		v			10j

" page up
nnoremap		b			<S-Space>

" mark before jumping
nnoremap		gg			mzgg
nnoremap		G			mzG
nnoremap		``			`z

" search {{{2
noremap			/			mz/
noremap			<C-f>		mz/
noremap			*			<C-v><C-c>mz/<S-Insert><CR>
noremap			#			<C-v><C-c>mz?<S-Insert><CR>

" command line {{{2
" recall commands
cnoremap		<C-p>		<PageUp>
cnoremap		<C-n>		<PageDown>
" recall and position cursor behind command
cnoremap		<A-p>		<PageUp><C-a><C-Right>
cnoremap		<A-n>		<PageDown><C-a><C-Right>
" recall matching commands
cnoremap		<A-j>		<Down>
cnoremap		<A-k>		<Up>

" cycle thru completion list
cnoremap		<C-i>		<Tab>
cnoremap		<C-o>		<S-Tab>

" address completion
cnoremap		<C-CR>		<End>.com<CR>
cnoremap		<S-CR>		<End>.net<CR>
cnoremap		<C-S-CR>	<End>.org<CR>

" text entry {{{2
" edit with external editor
inoremap		<C-g>		<C-i>

" cursor movement {{{3
inoremap		<A-j>		<Down>
inoremap		<A-k>		<Up>

inoremap		<A-h>		<Left>
cnoremap		<A-h>		<Left>

inoremap		<A-l>		<Right>
cnoremap		<A-l>		<Right>

inoremap		<C-l>		<Right>
cnoremap		<C-l>		<Right>

" word-wise movement/deletion {{{3
inoremap		<A-b>		<C-Left>
cnoremap		<A-b>		<C-Left>

inoremap		<A-f>		<C-Right>
cnoremap		<A-f>		<C-Right>

inoremap		<A-d>		<C-Del>
cnoremap		<A-d>		<C-Del>

inoremap		<A-BS>		<C-BS>
cnoremap		<A-BS>		<C-BS>

" navigation {{{2
" stop
noremap			x			<C-c>

" go back/forward starting in non-normal modes
inoremap		<C-o>		<Esc><C-o>
inoremap		<C-i>		<Esc><C-i>

" view jump list
noremap<silent>	<C-m>		:jumps<CR>

" follow previous/next links
noremap			<			[[
noremap			>			]]

" macros {{{2
" paste-n-go from selection or clipboard
noremap			p			<C-v><C-c>p
noremap			P			<C-v><C-c>gP

" quick search in background tab
" google/wikipedia/special/dictionary
noremap<silent>	s			<C-v><C-c>:set act!=tabopen<CR>tg<Space><S-Insert><CR>:set act!=tabopen<CR>
noremap<silent>	w			<C-v><C-c>:set act!=tabopen<CR>tw<Space><S-Insert><CR>:set act!=tabopen<CR>
noremap<silent>	S			<C-v><C-c>:set act!=tabopen<CR>ts<Space><S-Insert><CR>:set act!=tabopen<CR>
noremap<silent>	W			<C-v><C-c>:set act!=tabopen<CR>td<Space><S-Insert><CR>:set act!=tabopen<CR>

" search with selection or clipboard contents
noremap			a			<C-v><C-c>o<S-Insert><Home><C-Right><Space>
noremap			A			<C-v><C-c>t<S-Insert><Home><C-Right><Space>

" tabs {{{2
" previous/next tab
noremap			<C-A-i>		gT
noremap			<C-A-o>		gt

" open/close
noremap			<C-A-t>		<C-T>
noremap			<C-A-w>		<C-w>

" undo close
noremap			U			:undo<Space><Tab>

" tab switching by buffer number
noremap			e			b
noremap			<C-e>		B:buffer!<Space>

" move the current tab
noremap<silent>	<leader>H	:tabmove 0<CR>
noremap<silent>	<leader>L	:tabmove<CR>
noremap<silent>	<leader>h	:tabmove! -1<CR>
noremap<silent>	<leader>l	:tabmove! +1<CR>

" duplicate, detach, attach
noremap<silent>	<leader>d	ygP
noremap<silent>	<leader>w	:tabdetach<CR>
noremap<silent>	<leader>W	:tabattach 1<CR>

" interface {{{2
" toggle toolbars
" Menu Bar, Navigation Toolbar
noremap<silent>	c			:js toggle_bars(["toolbar-menubar","nav-bar"])<CR>
" Bookmarks Toolbar (PersonalToolbar)
noremap<silent>	C			:toolbartoggle Bookmarks Toolbar<CR>

" vimperator help
noremap			H			:help<Space>
" run command
noremap			!			:!

" function keys {{{2
noremap<silent>	<F4>		:emenu Bookmarks.Organize Bookmarks…<CR>
noremap<silent>	<F5>		:nohlsearch<CR>
noremap			<F13>		<C-o>
noremap			<F14>		<C-i>

" bookmarks {{{2
" search bookmarks
noremap			B			:bmarks<Space>

" toggle bookmark
noremap			<leader>b	A

" readability
noremap<silent>	<leader>r	:emenu Bookmarks.Bookmarks Toolbar.Read<CR>
" invert colors
noremap<silent>	<leader>i	:emenu Bookmarks.Bookmarks Toolbar.Macros.Invert colors<CR>

" plugins {{{2
" firebug
noremap<silent>	<leader>f	:firebug toggle<CR>
noremap<silent>	<leader>F	:firebug console-clear<CR>:firebug console-focus<CR>

" minion
noremap<silent>	<C-S-p>		:mpd pause!<CR>
noremap<silent>	<C-S-j>		:mpd next<CR>
noremap<silent>	<C-S-k>		:mpd prev<CR>
noremap<silent>	<C-S-h>		:mpd seek -5<CR>
noremap<silent>	<C-S-l>		:mpd seek +5<CR>
noremap<silent>	<C-S-m>		:mpd<CR>
noremap<silent>	<C-S-f>		:mpd vol +5<CR>
noremap<silent>	<C-S-v>		:mpd vol -5<CR>
noremap<silent>	<C-S-g>		:mpd info<CR>

" external {{{2
" detach to chrome
noremap<silent>	<leader>c	yd:!chrome <S-Insert> &<CR>

" play flash videos with vlc
noremap<silent>	<leader>v	:!vlc /tmp/Flash* &<CR>

" }}}

" options {{{1
" vimperator {{{2
set complete=l
set defsearch=gl
set editor='scim-run gvim -f'
set followhints=0
set guioptions+=B
set guioptions+=n
set hlsearch
set newtab=all
set nextpattern=\\bnext\\b,\\bsiguiente\\b,\\bposterior\\b,^>$,^(>>|»)$,^(>|»),(>|»)$,\\bmore\\b
set previouspattern=\\b(prev|previous)\\b,\\banterior\\b,^<$,^(<<|«)$,^(<|«),(<|«)$
set sanitizeitems=cache,commandline,cookies,downloads,formdata,history,macros,marks,offlineapps,sitesettings
set sanitizetimespan=0
set showstatuslinks=2
set showtabline=1
set titlestring=Firefox
set urlseparator=;
set visualbell
" set wildmode=list:longest
" set wildoptions=auto

" about:config {{{2
set! browser.sessionstore.interval=60000
set! browser.tabs.loadInBackground=true
set! middlemouse.paste=true
set! security.dialog_enable_delay=0

" styling {{{1
hi! Bell			display: none;
hi! StatusLine		color: black; background: #d0d0d0;
hi! CmdLine -a		color: black; background: #eeeeee;
hi! Normal			color: black; background: #eeeeee;

" javascript {{{1
javascript <<EOF

// toggle toolbars
toggle_bars = function(bars) {
	for (var i in bars) document.getElementById(bars[i]).collapsed ^= 1;
};

// rss feed button
(function() {
	var feedPanel = document.createElement("statusbarpanel");
	feedPanel.setAttribute("id", "feed-panel-clone");
	feedPanel.appendChild(document.getElementById("feed-button"));
	feedPanel.firstChild.setAttribute("style", "padding: 0; max-height: 16px;");
	document.getElementById("status-bar")
		.insertBefore(feedPanel, document.getElementById("security-button"));
})();

EOF

" environment {{{1
cd ~

" vim:set ts=4 sw=4 noet fdm=marker ft=vimperator:
